#!/bin/bash
# For renewing previously-obtained certs only; can be used as a cron script
# directly

# Note that, as of 2016-01-09, wildcard certs are still not supported.
((EUID == 0)) || exec sudo "$0" "$@"

set -ex
JWODDER_ROOT="$(dirname "$(readlink -f "$0")")"
. "$JWODDER_ROOT/etc/certbot"

certbot renew \
    --quiet \
    --non-interactive \
    --pre-hook "$JWODDER_ROOT/bin/certbot-pre-hook" \
    --post-hook "$JWODDER_ROOT/bin/certbot-post-hook"
