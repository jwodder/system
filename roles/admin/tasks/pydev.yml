---
- name: Download get-pip.py
  get_url:
    url: https://bootstrap.pypa.io/get-pip.py
    dest: /tmp/get-pip.py
    force: true

- name: Install pip for Python 2
  command: python2 /tmp/get-pip.py --user
  args:
    creates: ~/.local/bin/pip2
  become_user: "{{admin_user}}"

- name: Install pip for Python 3
  command: python3 /tmp/get-pip.py --user
  args:
    creates: ~/.local/bin/pip3
  become_user: "{{admin_user}}"

- name: Install essential Python 2 packages
  pip:
    name: "{{item}}"
    extra_args: --user
    executable: ~/.local/bin/pip2
  with_items:
    - requests
    - rwt
  become_user: "{{admin_user}}"

### click? attrs? python-dateutil? six? flake8? enum34?

- name: Install essential Python 3 packages
  pip:
    name: "{{item}}"
    extra_args: --user
    executable: ~/.local/bin/pip3
  with_items:
    - requests
    - rwt
    - setuptools
    - tox
    - twine
    - virtualenv
    - wheel
  become_user: "{{admin_user}}"
